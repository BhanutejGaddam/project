
<div class="app-page container">
  <!-- Page header -->
  <div class="d-flex align-items-center mb-2">
    <i class="bi bi-car-front-fill text-primary fs-4 me-2"></i>
    <h2 class="text-primary mb-0">Vehicle Inventory Management</h2>
  </div>

  <!-- Admin panel header + toolbar -->
  <div class="d-flex align-items-center mb-3">
    <h3 class="text-primary mb-0">Dealer Inventory Admin Panel</h3>
    <div class="ms-auto d-flex gap-2">
    </div>
  </div>

  <!-- Dealers grid (âœ… dynamic) -->
  <div class="row gy-4">
    <div class="col-12" *ngFor="let dealer of dealers">
      <div class="card bg-dark-custom shadow-sm">
        <div class="card-header d-flex align-items-center">
          <strong>{{ dealer.dealerName }}</strong>
          <span class="text-secondary ms-2">(ID: {{ dealer.dealerID }})</span>

          <!-- header badges from computed helpers -->
          <span class="ms-auto badge rounded-pill bg-info text-dark">
            Units: {{ getDealerTotalUnits(dealer) }}
          </span>
          <span class="ms-2 badge rounded-pill bg-primary">
            Value: {{ getDealerTotalValueINR(dealer) | currency:'INR':'symbol':'1.0-0' }}
          </span>
        </div>

        <div class="card-body">
          <div class="table-responsive rounded-table">
            <table class="table table-hover table-bordered align-middle mb-0">
              <thead class="table-dark">
                <tr>
                  <th scope="col">Vehicle ID</th>
                  <th scope="col">Model</th>
                  <th scope="col">Price (INR)</th>
                  <th scope="col">No. of Vehicles Available</th>
                  <th scope="col">Actions</th>
                </tr>
              </thead>

              <tbody>
                <tr *ngFor="let v of dealer.vehicles">
                  <td class="text-center">{{ v.vehicleID }}</td>
                  <td class="fw-medium">{{ v.model }}</td>
                  <td>{{ v.price | currency:'INR':'symbol':'1.0-0' }}</td>
                  <td class="text-center">
                    <span class="badge rounded-pill bg-success">{{ v.noOfVehiclesAvailable }}</span>
                  </td>
                  <td class="text-center">
            
                    <a class="btn btn-outline-info btn-sm"
                       [routerLink]="['../dealers']"
                       [queryParams]="{ id: dealer.dealerID }">
                      View Dealer
                    </a>
                  </td>
                </tr>

                <tr *ngIf="!dealer.vehicles?.length">
                  <td colspan="5" class="text-center text-muted">No vehicles yet</td>
                </tr>
              </tbody>

              <tfoot>
                <tr>
                  <td colspan="3" class="text-end fw-semibold">Dealer Totals:</td>
                  <td class="text-center">
                    <div class="d-flex justify-content-center gap-2">
                      <span class="badge rounded-pill bg-info text-dark">
                        {{ getDealerTotalUnits(dealer) }}
                      </span>
                      <span class="badge rounded-pill bg-primary">
                        {{ getDealerTotalValueINR(dealer) | currency:'INR':'symbol':'1.0-0' }}
                      </span>
                    </div>
                  </td>
                  <td></td>
                </tr>
              </tfoot>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Overall summary -->
  <div class="card bg-dark-custom shadow-sm mt-4">
    <div class="card-body d-flex flex-wrap justify-content-between align-items-center">
      <h5 class="mb-2 mb-md-0">Overall Inventory Summary</h5>
      <div class="d-flex gap-3">
        <span class="badge rounded-pill bg-info text-dark">
          Total Units: {{ getOverallTotalUnits() }}
        </span>
        <span class="badge rounded-pill bg-primary">
          Total Value: {{ getOverallTotalValueINR() | currency:'INR':'symbol':'1.0-0' }}
        </span>
      </div>
    </div>
  </div>
</div>
