<section class="service-tracking" aria-labelledby="service-tracking-title">
  <h2 id="service-tracking-title">Active Service Progress</h2>
  <br>

  @if (bookingsSig().length > 0) {
    @for (booking of bookingsSig(); track booking.bookingId) {
      <div class="booking-card" style="border: 1px solid #ddd; padding: 20px; border-radius: 12px; margin-bottom: 30px; background: #fff;">
        
        <ol class="timeline" role="list">
          @for (s of getStageData(booking); track s.key; let i = $index) {
            <li class="timeline-item" [attr.data-status]="getStepState(booking, i)">
              <span class="dot">
                @if (getStepState(booking, i) === 'completed') { <span class="dot-check">âœ“</span> }
                @else if (getStepState(booking, i) === 'current') { <span class="dot-current"></span> }
                @else { <span class="dot-pending"></span> }
              </span>

              <div class="content">
                <div class="title">{{ s.title }}</div>
                @if (s.meta) { <div class="meta">{{ s.meta }}</div> }
              </div>
            </li>
          }
        </ol>

        <div class="context">
          <div class="context-row">
            <span class="label">Vehicle:</span>
            <span class="value"><strong>{{ booking.vehicleModelYear }} {{ booking.registrationNumber }}</strong></span>
          </div>
          <div class="context-row">
            <span class="label">Status:</span>
            <span class="value status-pill">{{ booking.bookingStatus }}</span>
          </div>
        </div>
      </div>
    }
  } @else {
    <div class="empty-state">
      <p>No active service bookings found. Completed services can be viewed in History.</p>
    </div>
  }
</section>